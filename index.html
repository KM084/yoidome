function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const perspective = 0.002;
      const vanishX = canvas.width / 2;
      const vanishY = canvas.height * 0.3;

      const range = 20;
      for (let i = -range; i <= range; i++) {
        for (let j = 0; j < range; j++) {
          const worldX = i * tileSize - camera.x;
          const worldY = j * tileSize - camera.y;

          const dx = worldX - vanishX;
          const dy = worldY - vanishY;

          const scale = 1 / (1 + (canvas.height - dy) * perspective);
          const screenX = vanishX + dx * scale;
          const screenY = vanishY + dy * scale;

          const radiusX = circleRadius * scale;
          const radiusY = radiusX * 0.4;
          const alpha = Math.max(0, Math.min(1, scale));

          ctx.beginPath();
          ctx.ellipse(screenX, screenY, radiusX, radiusY, 0, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(135, 206, 235, ${alpha})`;
          ctx.fill();
        }
      }
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>
